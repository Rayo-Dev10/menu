document.addEventListener("DOMContentLoaded",function(){const container=document.getElementById('app-container');const money=v=>v>0?'$'+new Intl.NumberFormat('es-CO').format(v):'';const fmt=t=>t.replace(/^(.*?):/,'<strong>$1:</strong>');const renderList=items=>items.map(p=>{const cl=p.precio===0?' opt':'';return `<div class="item${cl}"><span>${fmt(p.item)}</span><span class="price">${money(p.precio)}</span></div>`}).join('');const renderMenuPage=(pageData)=>{return `<div class="stage menu-page"><img src="assets/rama.png" class="decor decor-tl"><img src="assets/rama.png" class="decor decor-br"><div class="header"><div class="sub">Restaurante</div><h1 class="brand">EL RECREO</h1><div class="sub" style="border-top:1px solid #fff;display:inline-block;padding-top:4px">MENÃš</div></div><div class="grupo g-izq"><div class="encabezado-seccion"><div class="pill">${pageData.g1.titulo}</div><div class="line"></div></div><div class="cuerpo-grupo"><div class="list">${renderList(pageData.g1.items)}</div><div class="circle-container"><img src="${pageData.g1.img}" onerror="this.style.backgroundColor='#222'"></div></div></div><div class="grupo g-der"><div class="encabezado-seccion"><div class="line"></div><div class="pill">${pageData.g2.titulo}</div></div><div class="cuerpo-grupo"><div class="circle-container"><img src="${pageData.g2.img}" onerror="this.style.backgroundColor='#222'"></div><div class="list">${renderList(pageData.g2.items)}</div></div></div><div class="grupo g-izq"><div class="encabezado-seccion"><div class="pill">${pageData.g3.titulo}</div><div class="line"></div></div><div class="cuerpo-grupo"><div class="list">${renderList(pageData.g3.items)}</div><div class="circle-container"><img src="${pageData.g3.img}" onerror="this.style.backgroundColor='#222'"></div></div></div></div>`};const renderClosingPage=(pageData)=>{const contactosHtml=pageData.contactos.map(c=>`<div class="contact-block"><div class="contact-role">${c.cargo}: ${c.nombre}</div><div class="contact-phone">Celular: ${c.celular}</div></div>`).join('');return `<div class="stage closing-page"><img src="assets/rama.png" class="decor decor-tl"><img src="assets/rama.png" class="decor decor-br" style="bottom:-10%; right:-10%;"><div class="header closing-header"><div class="sub">Restaurante</div><h1 class="brand">EL RECREO</h1></div><div class="closing-content"><div class="logo-container"><img src="${pageData.logo_img}" alt="Logo" onerror="this.style.display='none';"></div><div class="fake-button">${pageData.boton_texto}</div><div class="contacts-section">${contactosHtml}</div><div class="address-section"><div>${pageData.direccion.linea1}</div><div class="address-highlight">${pageData.direccion.linea2}</div></div><div class="delivery-text">${pageData.domicilio_texto}</div><div class="thank-you-text">${pageData.agradecimiento_texto}</div></div></div>`};fetch('menu.json').then(r=>r.json()).then(data=>{container.innerHTML=data.map(page=>{if(page.id==='hoja_cierre'){return renderClosingPage(page)}else{return renderMenuPage(page)}}).join('')}).catch(e=>console.error("Error en JSON:",e))});