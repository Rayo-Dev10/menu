:root {
  /* Restauración EXACTA de la paleta original */
  --Nivel1: #0a0a0a;
  --Nivel2: #141414;
  --Tablero: var(--Nivel2);
  --Negro: #0f0f10;
  --Blanco: #f3f3f3;
  --Dorado: #f2b400;
  --BgImage: url("assets/fondo-madera.jpg");
  --Luz: rgba(255, 255, 255, 0.06); /* Ajustado para coincidir con el original #ffffff0f */
  --FontUI: "Montserrat", sans-serif;
  --FontTitulo: "Playfair Display", serif;
  --FontCursiva: "Dancing Script", cursive;
  --SzTit: 70px;
  --SzSub: 18px;
  --SzTxt: 16px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  background: var(--Negro);
  font-family: var(--FontUI);
  color: var(--Blanco);
  display: grid;
  place-items: center;
  min-height: 100vh;
  overflow-x: hidden;
  padding: 50px 0;
}

/* Bloqueo de scroll nativo cuando el modal está abierto */
body:has(dialog[open]) { overflow: hidden; }

/* LAYOUT ORIGINAL RESTAURADO (Skeuomórfico) */
.stage {
  width: 816px;
  height: 1056px;
  position: relative;
  overflow: hidden;
  background-color: var(--Tablero);
  background-image: linear-gradient(0deg, var(--Luz), var(--Luz)), var(--BgImage);
  background-size: cover;
  background-blend-mode: overlay;
  box-shadow: 0 0 50px #000000cc;
  display: flex;
  flex-direction: column;
  margin-bottom: 50px;
  page-break-after: always;
  break-after: page;
}

/* Lógica de escalado para móviles (La original funcionaba mejor para este caso) */
@media (max-width: 850px) {
  .stage {
    transform: scale(calc(100vw / 850));
    transform-origin: top left;
    margin-bottom: -30%; /* Compensa el espacio vacío del scale */
  }
}

.menu-page { padding: 170px 40px 60px 40px; gap: 35px; }

/* Elementos decorativos */
.decor {
  position: absolute;
  z-index: 10;
  width: 15%;
  pointer-events: none;
  opacity: 0.9;
}
.decor-tl { top: 0; left: 0; }
.decor-br { bottom: 0; right: 0; transform: scale(-1); }

.header {
  text-align: center;
  position: absolute;
  top: 40px;
  width: 100%;
  left: 0;
  z-index: 5;
}

.brand {
  font-family: var(--FontTitulo);
  font-size: var(--SzTit);
  color: var(--Dorado);
  margin: 5px 0;
  line-height: 1;
  text-shadow: 0 4px 10px #00000099;
}

.sub {
  text-transform: uppercase;
  letter-spacing: 0.2em;
  font-size: var(--SzSub);
  opacity: 0.9;
}

.grupo {
  width: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.encabezado-seccion {
  display: flex;
  align-items: center;
  gap: 15px;
  width: 100%;
  .g-der & { flex-direction: row-reverse; }
}

.cuerpo-grupo {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 30px;
}

.pill {
  background: var(--Dorado);
  color: #000;
  padding: 4px 20px;
  border-radius: 50px;
  font-weight: 800;
  font-size: var(--SzTxt);
  text-transform: uppercase;
  box-shadow: 0 4px 10px #00000066;
  white-space: nowrap;
  flex-shrink: 0;
}

.line { height: 2px; background: #ffffff99; flex-grow: 1; }

.list {
  flex: 1;
  font-size: var(--SzTxt);
  text-shadow: 0 2px 4px #000000cc;
  .g-der & { text-align: right; }
}

.item {
  display: flex;
  align-items: flex-end;
  gap: 5px;
  margin-bottom: 8px;
  .g-der & { flex-direction: row-reverse; }

  &::after {
    content: "";
    flex-grow: 1;
    border-bottom: 2px dotted rgba(255,255,255,0.2);
    margin-bottom: 5px;
    order: 2;
  }
  
  &:only-child::after { display: none; }
  &.opt::after { display: none; }
  
  strong { font-weight: 800; color: #fff; }
  span:first-child { order: 1; }
  
  .price {
    color: var(--Dorado);
    font-weight: 700;
    white-space: nowrap;
    order: 3;
  }

  &.opt {
    font-style: italic;
    color: #ffffffb3;
    padding-left: 20px;
    margin-top: -4px;
    margin-bottom: 10px;
    strong { font-weight: 600; color: inherit; }
  }
}

/* Botones interactivos */
.item-title {
  font-weight: 800;
  color: #fff;
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  text-align: left;
  
  &.is-clickable {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;

    &::before, &::after {
      content: "";
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--Dorado);
      animation: dotPress 1.4s ease-in-out infinite;
      flex-shrink: 0;
    }
    
    /* Lógica original para posición del punto */
    &::after { content: none; }
    .g-der &::before { content: none; }
    .g-der &::after { content: ""; }
  }
}

@keyframes dotPress {
  0%, 100% { transform: scale(1); box-shadow: 0 0 0 #f2b40066; }
  50% { transform: scale(0.65); box-shadow: 0 0 10px #f2b40099; }
}

.circle-container {
  width: 200px;
  height: 200px;
  border-radius: 50%;
  border: 4px solid #ffffffe6;
  overflow: hidden;
  background: #222;
  box-shadow: 0 10px 30px #00000080;
  flex-shrink: 0;
  img { width: 100%; height: 100%; object-fit: cover; }
}

/* Cierre */
.closing-page {
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 140px 60px 60px 60px;
}
.closing-header { top: 60px; }
.closing-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 40px;
  width: 100%;
  max-width: 600px;
  z-index: 2;
}

.logo-container {
  width: 180px;
  height: 180px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 10px;
  img { max-width: 100%; max-height: 100%; object-fit: contain; filter: drop-shadow(0 5px 15px #00000099); }
}

.fake-button {
  background: var(--Dorado);
  color: var(--Nivel1);
  font-weight: 800;
  text-transform: uppercase;
  padding: 12px 40px;
  border-radius: 4px;
  font-size: 16px;
  letter-spacing: 0.05em;
  box-shadow: 0 5px 20px #00000066;
  display: inline-block;
}

.contacts-section { display: flex; flex-direction: column; gap: 25px; width: 100%; }
.contact-block { display: flex; flex-direction: column; gap: 5px; }
.contact-role { font-size: 18px; font-weight: 600; color: var(--Blanco); }
.contact-phone { font-size: 18px; color: #ffffffcc; }
.address-section { font-size: 16px; line-height: 1.5; color: #ffffffcc; }
.address-highlight { font-size: 18px; font-weight: 700; color: var(--Blanco); margin-top: 5px; }
.delivery-text {
  font-family: var(--FontTitulo);
  font-size: 36px;
  font-weight: 700;
  color: var(--Dorado);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-shadow: 0 2px 10px #00000080;
}
.thank-you-text {
  font-family: var(--FontCursiva);
  font-size: 65px;
  color: var(--Dorado);
  text-shadow: 0 3px 10px #00000099;
  margin-top: 20px;
  transform: rotate(-2deg);
}

/* Modal Optimizado (Estilos visuales originales, estructura nativa) */
.modal {
  padding: 0;
  border: none;
  background: transparent;
  display: none;
  &[open] { display: flex; justify-content: center; align-items: flex-start; inset: 0; position: fixed; z-index: 1000; width: 100%; height: 100%; }
  &::backdrop { background: #00000099; }
}

.modal-dialog {
  position: relative;
  margin-top: 20px;
  width: min(90vw, 520px);
  max-height: 80vh;
  background: #141414;
  border-radius: 18px;
  border: 1px solid #ffffff1a;
  box-shadow: 0 30px 60px #00000099;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modal-content {
  padding: 24px 22px 26px 22px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 80vh;
  overflow: auto;
}

.modal-close {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 38px;
  height: 38px;
  border-radius: 50%;
  border: none;
  background: #ffffff14;
  color: #fff;
  font-size: 20px;
  display: grid;
  place-items: center;
  cursor: pointer;
  z-index: 20;
}

.modal-title { margin: 0; font-family: var(--FontTitulo); font-size: 26px; color: var(--Dorado); }
.modal-prep { margin: 0; color: #ffffffe6; line-height: 1.4; }

.modal-carousel { display: flex; align-items: center; gap: 10px; }
.carousel-track { flex: 1; min-height: 180px; display: grid; place-items: center; }
.carousel-image { display: none; width: 100%; max-height: 220px; object-fit: cover; border-radius: 14px; border: 1px solid #ffffff14; }
.carousel-image.active { display: block; }
.carousel-btn { width: 36px; height: 36px; border-radius: 50%; border: none; background: #ffffff14; color: #fff; font-size: 20px; display: grid; place-items: center; cursor: pointer; }
.carousel-btn:disabled { opacity: 0.35; cursor: default; }

@media print {
  body { padding: 0; background: none; }
  .stage { margin: 0; box-shadow: none; transform: none; }
  .modal { display: none; }
}
